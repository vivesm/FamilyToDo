@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  body {
    @apply bg-neutral-50 text-neutral-900 antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background-attachment: fixed;
  }

  /* Dark mode body */
  .dark body {
    @apply bg-neutral-950 text-neutral-100;
    background-image: linear-gradient(180deg, #0A0A0B 0%, #1A1A1C 100%);
  }

  /* Prevent pull-to-refresh on iOS */
  body {
    overscroll-behavior-y: contain;
  }

  /* Ensure minimum touch target sizes */
  button, a, [role="button"] {
    @apply min-h-touch min-w-touch;
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
}

@layer components {
  /* Modern glass card */
  .glass-card {
    @apply bg-white/80 dark:bg-surface-dark/80 backdrop-blur-md rounded-2xl shadow-soft border border-white/20 dark:border-white/10;
  }

  /* Task card styles with modern effects */
  .task-card {
    @apply glass-card p-5 transition-all duration-300 hover:shadow-soft-lg hover:scale-[1.02] active:scale-[0.98];
  }

  .task-card-urgent {
    @apply border-2;
    border-image: linear-gradient(135deg, #EF4444, #F97316) 1;
    box-shadow: 0 0 30px rgba(239, 68, 68, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .task-card-soon {
    @apply border-2;
    border-image: linear-gradient(135deg, #F59E0B, #FBBF24) 1;
    box-shadow: 0 0 30px rgba(245, 158, 11, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .task-card-whenever {
    @apply border-2;
    border-image: linear-gradient(135deg, #10B981, #34D399) 1;
    box-shadow: 0 0 30px rgba(16, 185, 129, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  /* Person selector styles */
  .person-avatar {
    @apply w-16 h-16 rounded-full object-cover border-2 transition-all duration-200;
  }

  .person-avatar-active {
    @apply border-blue-500 ring-4 ring-blue-200 scale-105;
  }

  /* Category filter styles */
  .category-chip {
    @apply inline-flex items-center justify-center px-4 py-3 rounded-full text-2xl transition-all duration-200;
  }

  .category-chip-active {
    @apply bg-blue-500 ring-4 ring-blue-200 scale-105;
  }

  /* Modern button styles */
  .btn-primary {
    @apply bg-gradient-primary text-white px-6 py-3 rounded-full font-medium text-base
           shadow-lg shadow-primary-500/25 hover:shadow-xl hover:shadow-primary-500/30
           active:scale-95 transition-all duration-300
           min-h-[48px] flex items-center justify-center;
  }

  .btn-secondary {
    @apply bg-white/80 dark:bg-surface-dark/80 backdrop-blur-sm
           text-neutral-800 dark:text-neutral-200 px-6 py-3 rounded-full font-medium text-base
           border border-neutral-200 dark:border-neutral-700
           shadow-soft hover:shadow-soft-lg hover:bg-white dark:hover:bg-surface-dark
           active:scale-95 transition-all duration-300
           min-h-[48px] flex items-center justify-center;
  }

  .btn-ghost {
    @apply text-neutral-600 dark:text-neutral-400 px-4 py-2 rounded-xl
           hover:bg-neutral-100 dark:hover:bg-neutral-800
           active:scale-95 transition-all duration-200;
  }

  .btn-icon {
    @apply w-10 h-10 rounded-xl flex items-center justify-center
           hover:bg-neutral-100 dark:hover:bg-neutral-800
           active:scale-90 transition-all duration-200;
  }

  /* Loading spinner */
  .spinner {
    @apply inline-block w-8 h-8 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin;
  }

  /* Task completion animation */
  @keyframes taskComplete {
    0% { transform: scale(1) rotate(0); opacity: 1; }
    50% { transform: scale(1.2) rotate(5deg); }
    100% { transform: scale(0) rotate(360deg); opacity: 0; }
  }

  .task-completing {
    animation: taskComplete 0.5s ease-out forwards;
  }

  /* Overdue task enhanced animation */
  @keyframes overdueGlow {
    0%, 100% { 
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
      border-color: #EF4444;
      background-color: rgba(239, 68, 68, 0.15);
      transform: translateX(0);
    }
    25% { 
      box-shadow: 0 0 25px rgba(251, 146, 60, 0.6);
      border-color: #FB923C;
      background-color: rgba(251, 146, 60, 0.25);
      transform: translateX(-2px);
    }
    50% { 
      box-shadow: 0 0 30px rgba(251, 191, 36, 0.7);
      border-color: #FBBF24;
      background-color: rgba(251, 191, 36, 0.3);
      transform: translateX(0);
    }
    75% { 
      box-shadow: 0 0 25px rgba(251, 146, 60, 0.6);
      border-color: #FB923C;
      background-color: rgba(251, 146, 60, 0.25);
      transform: translateX(2px);
    }
  }

  .task-overdue {
    animation: overdueGlow 1.5s ease-in-out infinite;
    border: 2px solid #EF4444;
    border-left-width: 4px;
    position: relative;
  }
}

@layer utilities {
  /* iOS safe area padding */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Disable text selection except for inputs */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Enable text selection for inputs */
  input, textarea {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }
}

